var THREE={REVISION:"71",log:function(){console.log.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)},MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2}};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return THREE.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return THREE.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},
subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);
this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},
distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===
a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return THREE.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return THREE.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return THREE.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=
a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&THREE.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,
c));return this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var f=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*
c+a[8]*d+a[12])*f;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*f;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*f;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,f=a.x,e=a.y,g=a.z;a=a.w;var l=a*b+e*d-g*c,p=a*c+g*b-f*d,k=a*d+f*c-e*b,b=-f*b-e*c-g*d;this.x=l*a+b*-f+p*-g-k*-e;this.y=p*a+b*-e+k*-f-l*-g;this.z=k*a+b*-g+l*-e-p*-f;return this},project:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),
unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=
a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,
b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):
Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},cross:function(a,b){if(void 0!==b)return THREE.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,f=this.z;this.x=d*a.z-f*a.y;this.y=
f*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,f=a.z,e=b.x,g=b.y,l=b.z;this.x=d*l-f*g;this.y=f*e-c*l;this.z=c*g-d*e;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===
a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){THREE.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){THREE.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){THREE.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){THREE.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){THREE.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;
return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=
a.array[b+2];return this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;
this._w=a.w;this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*
a._x+this._y*a._y+this._z*a._z+this._w*a._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};
THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&THREE.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,copy:function(a){this.elements.set(a.elements);return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,f=a.z,e=a.w,g=c+c,l=d+d,p=f+f;a=c*g;var k=c*l,c=c*p,m=d*l,d=d*p,f=f*p,g=e*g,l=e*l,e=e*p;b[0]=1-(m+f);b[4]=k-e;b[8]=c+l;b[1]=k+e;b[5]=1-(a+f);b[9]=d-g;b[2]=c-l;b[6]=d+g;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,f=this.elements,
e=c[0],g=c[4],l=c[8],p=c[12],k=c[1],m=c[5],h=c[9],r=c[13],t=c[2],u=c[6],v=c[10],w=c[14],n=c[3],q=c[7],x=c[11],c=c[15],A=d[0],y=d[4],z=d[8],B=d[12],C=d[1],D=d[5],E=d[9],F=d[13],G=d[2],H=d[6],I=d[10],J=d[14],K=d[3],L=d[7],M=d[11],d=d[15];f[0]=e*A+g*C+l*G+p*K;f[4]=e*y+g*D+l*H+p*L;f[8]=e*z+g*E+l*I+p*M;f[12]=e*B+g*F+l*J+p*d;f[1]=k*A+m*C+h*G+r*K;f[5]=k*y+m*D+h*H+r*L;f[9]=k*z+m*E+h*I+r*M;f[13]=k*B+m*F+h*J+r*d;f[2]=t*A+u*C+v*G+w*K;f[6]=t*y+u*D+v*H+w*L;f[10]=t*z+u*E+v*I+w*M;f[14]=t*B+u*F+v*J+w*d;f[3]=n*A+
q*C+x*G+c*K;f[7]=n*y+q*D+x*H+c*L;f[11]=n*z+q*E+x*I+c*M;f[15]=n*B+q*F+x*J+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,f=d[0],e=d[4],g=d[8],l=d[12],p=d[1],k=d[5],m=d[9],h=d[13],r=d[2],t=d[6],
u=d[10],v=d[14],w=d[3],n=d[7],q=d[11],d=d[15];c[0]=m*v*n-h*u*n+h*t*q-k*v*q-m*t*d+k*u*d;c[4]=l*u*n-g*v*n-l*t*q+e*v*q+g*t*d-e*u*d;c[8]=g*h*n-l*m*n+l*k*q-e*h*q-g*k*d+e*m*d;c[12]=l*m*t-g*h*t-l*k*u+e*h*u+g*k*v-e*m*v;c[1]=h*u*w-m*v*w-h*r*q+p*v*q+m*r*d-p*u*d;c[5]=g*v*w-l*u*w+l*r*q-f*v*q-g*r*d+f*u*d;c[9]=l*m*w-g*h*w-l*p*q+f*h*q+g*p*d-f*m*d;c[13]=g*h*r-l*m*r+l*p*u-f*h*u-g*p*v+f*m*v;c[2]=k*v*w-h*t*w+h*r*n-p*v*n-k*r*d+p*t*d;c[6]=l*t*w-e*v*w-l*r*n+f*v*n+e*r*d-f*t*d;c[10]=e*h*w-l*k*w+l*p*n-f*h*n-e*p*d+f*k*d;c[14]=
l*k*r-e*h*r-l*p*t+f*h*t+e*p*v-f*k*v;c[3]=m*t*w-k*u*w-m*r*n+p*u*n+k*r*q-p*t*q;c[7]=e*u*w-g*t*w+g*r*n-f*u*n-e*r*q+f*t*q;c[11]=g*k*w-e*m*w-g*p*n+f*m*n+e*p*q-f*k*q;c[15]=e*m*r-g*k*r+g*p*t-f*m*t-e*p*u+f*k*u;c=f*c[0]+p*c[4]+r*c[8]+w*c[12];if(0==c){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");THREE.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},scale:function(a){var b=this.elements,
c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},makeFrustum:function(a,b,c,d,f,e){var g=this.elements;g[0]=2*f/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*f/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(e+f)/(e-f);g[14]=-2*e*f/(e-f);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,
b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*a));var f=-a;return this.makeFrustum(f*b,a*b,f,a,c,d)}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,f=0;f<d;f++)c[f]=b[f];for(f=0;f<d;f++)c[f].call(this,a)}}}};THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var f=0;36>f;f++)8==f||13==f||18==f||23==f?b[f]="-":14==f?b[f]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[f]=a[19==f?d&3|8:d]);return b.join("")}}(),degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=void 0;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3(1,1,1);Object.defineProperties(this,{position:{enumerable:!0,value:a},quaternion:{enumerable:!0,value:b},scale:{enumerable:!0,value:c}});this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=
new THREE.Matrix4;this.matrixAutoUpdate=!0;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);
THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return THREE.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof THREE.Object3D?(void 0!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),
this.children.push(a)):THREE.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=void 0,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getWorldPosition:function(a){a=a||new THREE.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,
b=new THREE.Vector3;return function(c){c=c||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldScale:function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&
this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;
THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,f,e){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=f;this.height=e;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var a=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var b=this.fullWidth/this.fullHeight,a=Math.tan(THREE.Math.degToRad(.5*a))*this.near,c=-a,d=b*c,b=Math.abs(b*a-d),c=Math.abs(a-c);this.projectionMatrix.makeFrustum(d+this.x*b/this.fullWidth,d+(this.x+this.width)*b/this.fullWidth,a-(this.y+this.height)*c/this.fullHeight,a-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(a,
this.aspect,this.near,this.far)};THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.zoom=this.zoom;a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;a.projectionMatrix.copy(this.projectionMatrix);return a};THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.CSS3DObject=function(a){THREE.Object3D.call(this);this.element=a;this.element.style.position="absolute";this.addEventListener("removed",function(a){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})};THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype);THREE.CSS3DSprite=function(a){THREE.CSS3DObject.call(this,a)};THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype);
THREE.CSS3DRenderer=function(a){console.log("THREE.CSS3DRenderer",THREE.REVISION);var b,c,d,f,e=new THREE.Matrix4,g=0,l="",p={},k=document.createElement("div");a&&(k=a);k.style.overflow="hidden";k.style.WebkitTransformStyle="preserve-3d";k.style.MozTransformStyle="preserve-3d";k.style.oTransformStyle="preserve-3d";k.style.transformStyle="preserve-3d";this.domElement=k;var m=document.createElement("div");m.style.WebkitTransformStyle="preserve-3d";m.style.MozTransformStyle="preserve-3d";m.style.oTransformStyle=
"preserve-3d";m.style.transformStyle="preserve-3d";k.appendChild(m);this.setClearColor=function(){};this.setSize=function(a,e){b=a;c=e;d=b/2;f=c/2;k.style.width=a+"px";k.style.height=e+"px";m.style.width=a+"px";m.style.height=e+"px"};var h=function(a){return 1E-6>Math.abs(a)?0:a},r=function(a){a=a.elements;return"translate3d(-50%,-50%,0) matrix3d("+h(a[0])+","+h(a[1])+","+h(a[2])+","+h(a[3])+","+h(-a[4])+","+h(-a[5])+","+h(-a[6])+","+h(-a[7])+","+h(a[8])+","+h(a[9])+","+h(a[10])+","+h(a[11])+","+
h(a[12])+","+h(a[13])+","+h(a[14])+","+h(a[15])+")"},t=function(a,b){if(a instanceof THREE.CSS3DObject){var c;a instanceof THREE.CSS3DSprite?(e.copy(b.matrixWorldInverse),e.transpose(),e.copyPosition(a.matrixWorld),e.scale(a.scale),e.elements[3]=0,e.elements[7]=0,e.elements[11]=0,e.elements[15]=1,c=r(e)):c=r(a.matrixWorld);var d=a.element,f=p[a.id];if(void 0===f||f!==c)d.style.WebkitTransform=c,d.style.MozTransform=c,d.style.oTransform=c,d.style.transform=c,p[a.id]=c;d.parentNode!==m&&m.appendChild(d)}c=
0;for(d=a.children.length;c<d;c++)t(a.children[c],b)};this.render=function(a,b){var e=.5/Math.tan(THREE.Math.degToRad(.5*b.fov))*c;g!==e&&(k.style.WebkitPerspective=e+"px",k.style.MozPerspective=e+"px",k.style.oPerspective=e+"px",k.style.perspective=e+"px",g=e);a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);var n;n=b.matrixWorldInverse.elements;n="matrix3d("+h(n[0])+","+h(-n[1])+","+h(n[2])+","+h(n[3])+","+h(n[4])+","+h(-n[5])+","+h(n[6])+
","+h(n[7])+","+h(n[8])+","+h(-n[9])+","+h(n[10])+","+h(n[11])+","+h(n[12])+","+h(-n[13])+","+h(n[14])+","+h(n[15])+")";e="translate3d(0,0,"+e+"px)"+n+" translate3d("+d+"px,"+f+"px, 0)";l!==e&&(m.style.WebkitTransform=e,m.style.MozTransform=e,m.style.oTransform=e,l=m.style.transform=e);t(a,b)}};THREE.OrbitControls=function(a,b){function c(a){if(!1!==e.enabled){a.preventDefault();if(x===q.DOLLY){if(!0===e.noZoom)return;r.set(a.clientX,a.clientY);t.subVectors(r,h);0<t.y?e.dollyIn():e.dollyOut();h.copy(r)}else if(x===q.PAN){if(!0===e.noPan)return;l.set(a.clientX,a.clientY);p.subVectors(l,g);e.pan(p.x,p.y);g.copy(l)}e.update()}}function d(a){if(!1!==e.enabled){if(2==a.button&&"undefined"!==e.rightClick&&130>new Date-e.rightClick.time){a=e.rightClick.originalEvent;var b=new CustomEvent("mz_contextmenu"),
f;for(f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);a.target.dispatchEvent(b)}document.removeEventListener("mousemove",c,!1);document.removeEventListener("mouseup",d,!1);e.dispatchEvent(z);x=q.NONE}}function f(a){!0===e.zoomTowardMouse&&(e.clientX=a.clientX,e.clientY=a.clientY,e.recenterCursor=!0);if(!1!==e.enabled&&!0!==e.noZoom){var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?e.dollyOut():e.dollyIn();e.update();e.dispatchEvent(y);e.dispatchEvent(z)}}this.object=a;this.domElement=
void 0!==b?b:document;this.enabled=!0;this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.zoomTowardMouse=!0;this.minZoomScale=.05;this.currentZoomScale=this.maxZoomScale=1;this.panButton=2;this.noPan=!1;this.keyPanSpeed=7;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var e=this,g=new THREE.Vector2,l=new THREE.Vector2,p=new THREE.Vector2,k=new THREE.Vector3,m=new THREE.Vector3,h=new THREE.Vector2,r=new THREE.Vector2,t=new THREE.Vector2,u=1,v=new THREE.Vector3,
w=new THREE.Vector3,n=new THREE.Quaternion,q={NONE:-1,DOLLY:1,PAN:2,TOUCH_DOLLY:4,TOUCH_PAN:5},x=q.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)).clone().inverse();var A={type:"change"},y={type:"start"},z={type:"end"};this.panLeft=function(a){var b=this.object.matrix.elements;k.set(b[0],b[1],b[2]);k.multiplyScalar(-a);v.add(k)};this.panUp=function(a){var b=this.object.matrix.elements;k.set(b[4],
b[5],b[6]);k.multiplyScalar(a);v.add(k)};this.pan=function(a,b){var c=e.domElement===document?e.domElement.body:e.domElement;if(void 0!==e.object.fov){var d=e.object.position.clone().sub(e.target).length(),d=d*Math.tan(e.object.fov/2*Math.PI/180);e.panLeft(2*a*d/c.clientHeight);e.panUp(2*b*d/c.clientHeight)}else void 0!==e.object.top?(e.panLeft(a*(e.object.right-e.object.left)/c.clientWidth),e.panUp(b*(e.object.top-e.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};
this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,e.zoomSpeed));u/=a};this.dollyOut=function(a){void 0===a&&(a=Math.pow(.95,e.zoomSpeed));u*=a};this.unproject=function(a){var b=new THREE.Vector3;b.set(e.clientX/e.domElement.clientWidth*2-1,2*-(e.clientY/e.domElement.clientHeight)+1,.5);b.unproject(a);var b=b.sub(a.position).normalize(),c=-a.position.z/b.z;return a.position.clone().add(b.multiplyScalar(c))};this.update=function(){var a;e.recenterCursor&&(a=e.unproject(this.object).clone());var b=
this.object.position;m.copy(b).sub(this.target);var c=m.length()*u,d=.5/Math.tan(THREE.Math.degToRad(.5*this.object.fov))*this.domElement.clientHeight;m.z=Math.max(d/this.maxZoomScale,Math.min(d/this.minZoomScale,c));e.currentZoomScale=d/m.z;this.target.add(v);b.copy(this.target).add(m);u=1;v.set(0,0,0);if(!0===e.recenterCursor)e.recenterCursor=!1,this.object.updateMatrixWorld(),a=e.unproject(this.object).sub(a),e.panLeft(a.x),e.panUp(-a.y),e.update();else if(1E-6<w.distanceToSquared(this.object.position)||
1E-6<8*(1-n.dot(this.object.quaternion)))this.dispatchEvent(A),w.copy(this.object.position),n.copy(this.object.quaternion)};this.reset=function(){x=q.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.update()};this.domElement.addEventListener("mousedown",function(a){if(!1!==e.enabled){if(1===a.button){if(!0===e.noZoom)return;a.preventDefault();x=q.DOLLY;h.set(a.clientX,a.clientY)}else if(a.button===e.panButton){if(!0===e.noPan)return;a.preventDefault();x=q.PAN;g.set(a.clientX,
a.clientY);e.rightClick={time:new Date,originalEvent:a}}document.addEventListener("mousemove",c,!1);document.addEventListener("mouseup",d,!1);e.dispatchEvent(y)}},!1);this.domElement.addEventListener("mousewheel",f,!1);this.domElement.addEventListener("DOMMouseScroll",f,!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==e.enabled){switch(a.touches.length){case 1:return;case 2:if(!0===e.noZoom)return;x=q.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-
a.touches[1].pageY;b=Math.sqrt(b*b+a*a);h.set(0,b);break;case 3:if(!0===e.noPan)return;x=q.TOUCH_PAN;g.set(a.touches[0].pageX,a.touches[0].pageY);break;default:x=q.NONE}e.dispatchEvent(y)}},!1);this.domElement.addEventListener("touchend",function(){!1!==e.enabled&&(e.dispatchEvent(z),x=q.NONE)},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==e.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:break;case 2:if(!0===e.noZoom)break;if(x!==q.TOUCH_DOLLY)break;
var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;b=Math.sqrt(b*b+a*a);r.set(0,b);t.subVectors(r,h);0<t.y?e.dollyOut():e.dollyIn();h.copy(r);e.update();break;case 3:if(!0===e.noPan)break;if(x!==q.TOUCH_PAN)break;l.set(a.touches[0].pageX,a.touches[0].pageY);p.subVectors(l,g);e.pan(p.x,p.y);g.copy(l);e.update();break;default:x=q.NONE}},!1);window.addEventListener("keydown",function(a){if(!1!==e.enabled&&!0!==e.noKeys&&!0!==e.noPan)switch(a.keyCode){case e.keys.UP:e.pan(0,
e.keyPanSpeed);e.update();break;case e.keys.BOTTOM:e.pan(0,-e.keyPanSpeed);e.update();break;case e.keys.LEFT:e.pan(e.keyPanSpeed,0);e.update();break;case e.keys.RIGHT:e.pan(-e.keyPanSpeed,0),e.update()}},!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);function makeItZoom(a){this.init(a||{})}
makeItZoom.prototype.init=function(a){a.containerId=a.containerId||"makeItZoom";a.maxZoomScale=a.maxZoomScale||1;a.minZoomScale=a.minZoomScale||.1;a.zoomSpeed=a.zoomSpeed||2;a.zoomTowardMouse=!1!==a.zoomTowardMouse;a.panButton="undefined"!=typeof a.panButton?a.panButton:2;a.disableNativeContextMenu="boolean"===typeof a.disableNativeContextMenu?a.disableNativeContextMenu:!0;this.options=a;this.container=document.getElementById(a.containerId);this.width=this.container.offsetWidth;this.height=this.container.offsetHeight;
this.camera=new THREE.PerspectiveCamera(70,this.width/this.height,1,1E6);this.camera.position.z=1200;this.scene=new THREE.Scene;this.renderer=new THREE.CSS3DRenderer;this.renderer.setSize(this.width,this.height);document.body.appendChild(this.renderer.domElement);this.renderer.domElement.className="makeitzoom_container";this.render=this.render.bind(this);this.attachControls();this.importDOM.call(this,this.container);this.render()};
makeItZoom.prototype.importDOM=function(a){var b=this;this.childElementIterator(a,function(a){a.mzOffset=b.getOffset(a)});this.childElementIterator(a,function(a){b.addZoomable.call(b,a,a.mzOffset)})};makeItZoom.prototype.childElementIterator=function(a,b){for(var c=a.children,d=0;d<c.length;d++)b.call(this,c[d])};
makeItZoom.prototype.attachControls=function(){this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement);this.controls.zoomSpeed=this.options.zoomSpeed;this.controls.minZoomScale=this.options.minZoomScale;this.controls.maxZoomScale=this.options.maxZoomScale;this.controls.zoomTowardMouse=this.options.zoomTowardMouse;this.controls.panButton=this.options.panButton;!0===this.options.disableNativeContextMenu&&this.controls.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},
!1);this.controls.addEventListener("change",this.render);this.render()};makeItZoom.prototype.render=function(){this.renderer.render(this.scene,this.camera);var a=new CustomEvent("mz_render");a.mz_center_x=this.controls.object.position.x;a.mz_center_y=this.controls.object.position.y;a.mz_scale=this.controls.currentZoomScale;this.container.dispatchEvent(a)};makeItZoom.prototype.addZoomable=function(a,b){var c=new THREE.CSS3DObject(a);c.position.x=b.left;c.position.y=b.top;c.position.z=0;this.scene.add(c)};
makeItZoom.prototype.getOffset=function(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}};makeItZoom.prototype.getCurrentScale=function(){return this.controls.currentZoomScale};makeItZoom.prototype.zoomTo=function(a,b,c){this.render()};
