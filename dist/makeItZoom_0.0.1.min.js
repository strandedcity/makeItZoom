var A;(function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return d}a.prototype=window.Event.prototype;window.CustomEvent=a})();function B(){console.warn.apply(console,arguments)}function aa(){console.error.apply(console,arguments)};function D(a,b){this.x=a||0;this.y=b||0}
D.prototype={constructor:D,set:function(a,b){this.x=a;this.y=b;return this},ya:function(a){this.x=a;return this},za:function(a){this.y=a;return this},a:function(a){this.x=a.x;this.y=a.y;return this},add:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a){this.x-=a.x;this.y-=a.y;return this},I:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},v:function(a){this.x*=a;this.y*=a;return this},Z:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>
a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},N:function(a){return this.x*a.x+this.y*a.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.Z(this.length())},
sa:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},clone:function(){return new D(this.x,this.y)}};function E(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}
E.prototype={constructor:E,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},ya:function(a){this.x=a;return this},za:function(a){this.y=a;return this},a:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},sub:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},I:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},v:function(a){this.x*=a;this.y*=a;this.z*=a;return this},W:function(){var a;
return function(b){void 0===a&&(a=new F);ba(a,b.B,ca(a,b.H));b=this.x;var c=this.y,d=this.z,f=a.elements,g=1/(f[3]*b+f[7]*c+f[11]*d+f[15]);this.x=(f[0]*b+f[4]*c+f[8]*d+f[12])*g;this.y=(f[1]*b+f[5]*c+f[9]*d+f[13])*g;this.z=(f[2]*b+f[6]*c+f[10]*d+f[14])*g;return this}}(),Z:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=
a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},N:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+
this.z*this.z)},normalize:function(){return this.Z(this.length())},sa:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},clone:function(){return new E(this.x,this.y,this.z)}};function G(a,b,c,d){this.f=a||0;this.g=b||0;this.h=c||0;this.c=void 0!==d?d:1}
G.prototype={constructor:G,f:0,g:0,h:0,c:0,get x(){return this.f},set x(a){this.f=a},get y(){return this.g},set y(a){this.g=a},get z(){return this.h},set z(a){this.h=a},get ka(){return this.c},set ka(a){this.c=a},set:function(a,b,c,d){this.f=a;this.g=b;this.h=c;this.c=d;return this},a:function(a){this.f=a.x;this.g=a.y;this.h=a.z;this.c=a.ka;return this},ab:function(){var a,b;return function(c,d){void 0===a&&(a=new E);b=c.N(d)+1;if(1E-6>b)b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,
c.y);else{var f=a,g=c.x,h=c.y,n=c.z,p=d.x,q=d.y,e=d.z;f.x=h*e-n*q;f.y=n*p-g*e;f.z=g*q-h*p}this.f=a.x;this.g=a.y;this.h=a.z;this.c=b;this.normalize();return this}}(),N:function(a){return this.f*a.f+this.g*a.g+this.h*a.h+this.c*a.c},length:function(){return Math.sqrt(this.f*this.f+this.g*this.g+this.h*this.h+this.c*this.c)},normalize:function(){var a=this.length();0===a?(this.h=this.g=this.f=0,this.c=1):(a=1/a,this.f=this.f*a,this.g=this.g*a,this.h=this.h*a,this.c=this.c*a);return this},clone:function(){return new G(this.f,
this.g,this.h,this.c)}};G.eb=function(){return(void 0).a(void 0).eb()};function F(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}
F.prototype={constructor:F,a:function(a){this.elements.set(a.elements);return this},v:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=
a;return this}};function da(a,b,c,d,f,g,h){a=a.elements;a[0]=2*g/(c-b);a[4]=0;a[8]=(c+b)/(c-b);a[12]=0;a[1]=0;a[5]=2*g/(f-d);a[9]=(f+d)/(f-d);a[13]=0;a[2]=0;a[6]=0;a[10]=-(h+g)/(h-g);a[14]=-2*h*g/(h-g);a[3]=0;a[7]=0;a[11]=-1;a[15]=0}
function ca(a,b){var c=a.elements,d=b.elements,f=d[0],g=d[4],h=d[8],n=d[12],p=d[1],q=d[5],e=d[9],l=d[13],m=d[2],k=d[6],t=d[10],r=d[14],u=d[3],v=d[7],w=d[11],d=d[15];c[0]=e*r*v-l*t*v+l*k*w-q*r*w-e*k*d+q*t*d;c[4]=n*t*v-h*r*v-n*k*w+g*r*w+h*k*d-g*t*d;c[8]=h*l*v-n*e*v+n*q*w-g*l*w-h*q*d+g*e*d;c[12]=n*e*k-h*l*k-n*q*t+g*l*t+h*q*r-g*e*r;c[1]=l*t*u-e*r*u-l*m*w+p*r*w+e*m*d-p*t*d;c[5]=h*r*u-n*t*u+n*m*w-f*r*w-h*m*d+f*t*d;c[9]=n*e*u-h*l*u-n*p*w+f*l*w+h*p*d-f*e*d;c[13]=h*l*m-n*e*m+n*p*t-f*l*t-h*p*r+f*e*r;c[2]=q*
r*u-l*k*u+l*m*v-p*r*v-q*m*d+p*k*d;c[6]=n*k*u-g*r*u-n*m*v+f*r*v+g*m*d-f*k*d;c[10]=g*l*u-n*q*u+n*p*v-f*l*v-g*p*d+f*q*d;c[14]=n*q*m-g*l*m-n*p*k+f*l*k+g*p*r-f*q*r;c[3]=e*k*u-q*t*u-e*m*v+p*t*v+q*m*w-p*k*w;c[7]=g*t*u-h*k*u+h*m*v-f*t*v-g*m*w+f*k*w;c[11]=h*q*u-g*e*u-h*p*v+f*e*v+g*p*w-f*q*w;c[15]=g*e*m-h*q*m+h*p*k-f*e*k-g*p*t+f*q*t;c=f*c[0]+p*c[4]+m*c[8]+u*c[12];if(0==c)return B("Can't invert matrix, determinant is 0"),a.kb(),a;a.v(1/c);return a}
function ba(a,b,c){var d=b.elements;c=c.elements;a=a.elements;b=d[0];var f=d[4],g=d[8],h=d[12],n=d[1],p=d[5],q=d[9],e=d[13],l=d[2],m=d[6],k=d[10],t=d[14],r=d[3],u=d[7],v=d[11],d=d[15],w=c[0],C=c[4],x=c[8],M=c[12],N=c[1],y=c[5],z=c[9],O=c[13],H=c[2],I=c[6],S=c[10],T=c[14],U=c[3],V=c[7],W=c[11];c=c[15];a[0]=b*w+f*N+g*H+h*U;a[4]=b*C+f*y+g*I+h*V;a[8]=b*x+f*z+g*S+h*W;a[12]=b*M+f*O+g*T+h*c;a[1]=n*w+p*N+q*H+e*U;a[5]=n*C+p*y+q*I+e*V;a[9]=n*x+p*z+q*S+e*W;a[13]=n*M+p*O+q*T+e*c;a[2]=l*w+m*N+k*H+t*U;a[6]=l*C+
m*y+k*I+t*V;a[10]=l*x+m*z+k*S+t*W;a[14]=l*M+m*O+k*T+t*c;a[3]=r*w+u*N+v*H+d*U;a[7]=r*C+u*y+v*I+d*V;a[11]=r*x+u*z+v*S+d*W;a[15]=r*M+u*O+v*T+d*c};function J(){}
J.prototype={constructor:J,apply:function(a){a.addEventListener=J.prototype.addEventListener;a.hasEventListener=J.prototype.Qa;a.removeEventListener=J.prototype.Da;a.dispatchEvent=J.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this.o&&(this.o={});var c=this.o;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},Qa:function(a,b){if(void 0===this.o)return!1;var c=this.o;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},Da:function(a,b){if(void 0!==this.o){var c=this.o[a];
if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this.o){var b=this.o[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,f=0;f<d;f++)c[f]=b[f];for(f=0;f<d;f++)c[f].call(this,a)}}}};var ea=function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var f=0;36>f;f++)8==f||13==f||18==f||23==f?b[f]="-":14==f?b[f]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[f]=a[19==f?d&3|8:d]);return b.join("")}}(),K=function(){var a=Math.PI/180;return function(b){return b*a}}(),fa=function(){var a=180/Math.PI;return function(b){return b*a}}();function L(){Object.defineProperty(this,"id",{value:ga++});ea();this.name="";this.type="Object3D";this.parent=void 0;this.children=[];this.gb=L.Ga.clone();Object.defineProperties(this,{position:{enumerable:!0,value:new E},ha:{enumerable:!0,value:new G},scale:{enumerable:!0,value:new E(1,1,1)}});this.A=new F;this.B=new F;this.ea=!0;this.fa=!1;this.visible=!0}L.Ga=new E(0,1,0);
L.prototype={constructor:L,add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return aa("Object3D.add: object can't be added as a child of itself.",a),this;a instanceof L?(void 0!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):aa("Object3D.add: object not an instance of Object3D.",a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);
b=this.children.indexOf(a);-1!==b&&(a.parent=void 0,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))}};
function P(a,b){if(!0===a.ea){var c=a.A,d=a.position,f=a.scale,g=a.ha,h=c.elements,n=g.x,p=g.y,q=g.z,e=g.ka,l=n+n,m=p+p,k=q+q,g=n*l,t=n*m,n=n*k,r=p*m,p=p*k,q=q*k,l=e*l,m=e*m,e=e*k;h[0]=1-(r+q);h[4]=t-e;h[8]=n+m;h[1]=t+e;h[5]=1-(g+q);h[9]=p-l;h[2]=n-m;h[6]=p+l;h[10]=1-(g+r);h[3]=0;h[7]=0;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;c.scale(f);c.setPosition(d);a.fa=!0}if(!0===a.fa||!0===b)void 0===a.parent?a.B.a(a.A):ba(a.B,a.parent.B,a.A),a.fa=!1,b=!0;c=0;for(d=a.children.length;c<d;c++)P(a.children[c],
b)}J.prototype.apply(L.prototype);var ga=0;function Q(){L.call(this);this.type="Camera";this.Ra=new F;this.H=new F}Q.prototype=Object.create(L.prototype);Q.prototype.constructor=Q;function R(a,b,c,d){Q.call(this);this.type="PerspectiveCamera";this.zoom=1;this.j=void 0!==a?a:50;this.K=void 0!==b?b:1;this.C=void 0!==c?c:.1;this.O=void 0!==d?d:2E3;ha(this)}R.prototype=Object.create(Q.prototype);R.prototype.constructor=R;
function ha(a){var b=fa(2*Math.atan(Math.tan(.5*K(a.j))/a.zoom));if(a.da){var c=a.da/a.ta,d=Math.tan(K(.5*b))*a.C,b=-d,f=c*b,c=Math.abs(c*d-f),b=Math.abs(d-b);da(a.H,f+a.x*c/a.da,f+(a.x+a.width)*c/a.da,d-(a.y+a.height)*b/a.ta,d-a.y*b/a.ta,a.C,a.O)}else{d=a.H;f=a.K;c=a.C;a=a.O;var b=c*Math.tan(K(.5*b)),g=-b;da(d,g*f,b*f,g,b,c,a)}}R.prototype.clone=function(){var a=new R;Q.prototype.clone.call(this,a);a.zoom=this.zoom;a.j=this.j;a.K=this.K;a.C=this.C;a.O=this.O;a.H.a(this.H);return a};function X(){L.call(this);this.type="Scene";this.ga=this.ca=null;this.qa=!0}X.prototype=Object.create(L.prototype);X.prototype.constructor=X;X.prototype.clone=function(a){void 0===a&&(a=new X);L.prototype.clone.call(this,a);null!==this.ca&&(a.ca=this.ca.clone());null!==this.ga&&(a.ga=this.ga.clone());a.qa=this.qa;a.ea=this.ea;return a};function Y(a){L.call(this);this.element=a;this.element.style.position="absolute";this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})}Y.prototype=Object.create(L.prototype);
function ia(a){function b(a,c){if(a instanceof Y){var d=a.element,f=e[a.id];if(void 0===f||""!==f)d.style.WebkitTransform="",d.style.MozTransform="",d.style.Ta="",d.style.transform="",e[a.id]="";d.parentNode!==k&&k.appendChild(d)}d=0;for(f=a.children.length;d<f;d++)b(a.children[d],c)}var c=1,d,f,g,h,n=!0,p=0,q="",e={},l=1,m=document.createElement("div");a&&(m=a);m.style.overflow="hidden";this.b=m;var k=document.createElement("div");m.appendChild(k);this.bb=function(a){n=a};this.Ya=function(a){c=1;
"CENTER"===a&&(c=0)};this.xa=function(a,b){d=a;f=b;g=d/2;h=f/2;m.style.width=a+"px";m.style.height=b+"px";k.style.width=a+"px";k.style.height=b+"px"};this.m=function(a,d){var e=.5/Math.tan(K(.5*d.j))*f;p!==e&&(p=e);P(a);void 0===d.parent&&P(d);ca(d.Ra,d.B);var e=-d.position.x,l=d.position.y;1===c&&(e+=g,l+=h);e=" scale("+this.Oa(d,m)+") translate("+e+"px,"+l+"px)"+(n?" translate3d(0,0,0)":"");q!==e&&(k.style.WebkitTransform=e,k.style.MozTransform=e,k.style.Ta=e,q=k.style.transform=e);b(a,d)};this.Oa=
function(a,b){var c=l;if(0!==b.clientHeight||"undefined"===typeof l)l=c=.5/Math.tan(K(.5*a.j))*b.clientHeight;return c/a.position.z}};function ja(a,b){function c(a){if(!1!==e.enabled){if(1===a.button){if(!0===e.F)return;a.preventDefault();z=y.la;u.set(a.clientX,a.clientY)}else if(a.button===e.G){if(!0===e.D)return;a.preventDefault();z=y.ma;l.set(a.clientX,a.clientY);e.ja={time:new Date,Ua:a}}document.addEventListener("mousemove",d,!1);document.addEventListener("mouseup",f,!1);e.dispatchEvent(H)}}function d(a){if(!1!==e.enabled){a.preventDefault();if(z===y.la){if(!0===e.F)return;v.set(a.clientX,a.clientY);w.I(v,u);0<w.y?e.$():e.aa();
u.a(v)}else if(z===y.ma){if(!0===e.D)return;m.set(a.clientX,a.clientY);k.I(m,l);e.pan(k.x,k.y);l.a(m)}e.update()}}function f(a){if(!1!==e.enabled){if(2==a.button&&"undefined"!==e.ja&&130>new Date-e.ja.time){a=e.ja.Ua;var b=new CustomEvent("mz_contextmenu");b.clientX=a.clientX;b.clientY=a.clientY;b.target=a.target;a.target.dispatchEvent(b)}document.removeEventListener("mousemove",d,!1);document.removeEventListener("mouseup",f,!1);e.dispatchEvent(I);z=y.NONE}}function g(a){!0===e.X&&(e.clientX=a.clientX,
e.clientY=a.clientY,e.ia=!0);if(!1!==e.enabled&&!0!==e.F){var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?e.aa():e.$();e.update();e.dispatchEvent(H);e.dispatchEvent(I)}}function h(a){if(!1!==e.enabled&&!0!==e.Sa&&!0!==e.D)switch(a.keyCode){case e.keys.Ea:e.pan(0,e.P);e.update();break;case e.keys.Aa:e.pan(0,-e.P);e.update();break;case e.keys.Ba:e.pan(e.P,0);e.update();break;case e.keys.Ca:e.pan(-e.P,0),e.update()}}function n(a){if(!1!==e.enabled){switch(a.touches.length){case 1:return;
case 2:if(!0===e.F)return;z=y.na;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;u.set(0,Math.sqrt(b*b+a*a));break;case 3:if(!0===e.D)return;z=y.oa;l.set(a.touches[0].pageX,a.touches[0].pageY);break;default:z=y.NONE}e.dispatchEvent(H)}}function p(a){if(!1!==e.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:break;case 2:if(!0===e.F)break;if(z!==y.na)break;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;
v.set(0,Math.sqrt(b*b+a*a));w.I(v,u);0<w.y?e.aa():e.$();u.a(v);e.update();break;case 3:if(!0===e.D)break;if(z!==y.oa)break;m.set(a.touches[0].pageX,a.touches[0].pageY);k.I(m,l);e.pan(k.x,k.y);l.a(m);e.update();break;default:z=y.NONE}}function q(){!1!==e.enabled&&(e.dispatchEvent(I),z=y.NONE)}this.object=a;this.b=void 0!==b?b:document;this.Y=this.enabled=!0;this.target=new E;this.F=!1;this.J=1;this.X=!0;this.S=.05;this.M=this.R=1;this.i=null;this.G=2;this.D=!1;this.P=7;this.Sa=!1;this.keys={Ba:37,
Ea:38,Ca:39,Aa:40};var e=this,l=new D,m=new D,k=new D,t=new E,r=new E,u=new D,v=new D,w=new D,C=1,x=new E,M=new E,N=new G,y={NONE:-1,la:1,ma:2,na:4,oa:5},z=y.NONE;this.fb=this.target.clone();this.Va=this.object.position.clone();(new G).ab(a.gb,new E(0,1,0));var O={type:"change"},H={type:"start"},I={type:"end"};this.wa=function(a){C=.5/Math.tan(K(.5*this.object.j))*this.b.clientHeight/a/this.object.position.z};this.cb=function(a){this.R=a};this.va=function(a){this.S=null===this.i?a:this.Ja(this.i)};
this.Ja=function(a){return Math.min(this.b.clientWidth/(a.right-a.left),this.b.clientHeight/(a.bottom-a.top))};this.hb=function(a){if(null==a||"object"!=typeof a)return null;for(var b=["top","left","bottom","right"],c=[-1,-1,1,1],d=!1,e={},f=0;f<b.length;f++)"[object Number]"===toString.call(a[b[f]])&&(d=!0),e[b[f]]="[object Number]"===toString.call(a[b[f]])?a[b[f]]:Infinity*c[f];return d?e:(B("Invalid bounds object specified."),null)};this.Za=function(a){this.i=a=this.hb(a);null!==a&&this.va(1)};
this.U=function(a){var b=this.object.A.elements;t.set(b[0],b[1],b[2]);t.v(-a);x.add(t)};this.V=function(a){var b=this.object.A.elements;t.set(b[4],b[5],b[6]);t.v(a);x.add(t)};this.pan=function(a,b){var c=e.b===document?e.b.body:e.b;if(void 0!==e.object.j){var d=e.object.position.clone().sub(e.target).length(),d=d*Math.tan(e.object.j/2*Math.PI/180);e.U(2*a*d/c.clientHeight);e.V(2*b*d/c.clientHeight)}else void 0!==e.object.top?(e.U(a*(e.object.right-e.object.left)/c.clientWidth),e.V(b*(e.object.top-
e.object.bottom)/c.clientHeight)):console.warn("WARNING: ZoomControls.js encountered an unknown camera type - pan disabled.")};this.$=function(){var a;void 0===a&&(a=Math.pow(.95,e.J));C/=a};this.aa=function(){var a;void 0===a&&(a=Math.pow(.95,e.J));C*=a};this.W=function(a){var b=new E;b.set(e.clientX/e.b.clientWidth*2-1,2*-(e.clientY/e.b.clientHeight)+1,.5);b.W(a);var b=b.sub(a.position).normalize(),c=-a.position.z/b.z;return a.position.clone().add(b.v(c))};this.update=function(a,b){var c=!1,d;e.ia&&
(d=e.W(this.object).clone());var f=this.object.position;r.a(f).sub(this.target);var g=r.length()*C,h=.5/Math.tan(K(.5*this.object.j))*this.b.clientHeight;r.z=Math.max(h/this.R,Math.min(h/this.S,g));e.M=h/r.z;this.target.add(x);f.a(this.target).add(r);C=1;x.set(0,0,0);!0===e.ia&&!0!==a&&(c=!0,e.ia=!1,P(this.object),d=e.W(this.object).sub(d),e.U(d.x),e.V(-d.y));if(null!==e.i&&!0!==b){var m=h=g=d=0,k=this.b.clientHeight/2,l=this.b.clientWidth/2,n=l/k,p=r.z*Math.tan(K(.5*this.object.j)),n=p*n;p-k+f.y+
x.y>-e.i.top&&(g+=-p-e.i.top+k-f.y-x.y);-n+l+f.x+x.x<e.i.left&&(d+=n+e.i.left-l-f.x-x.x);+p-f.y-x.y+k>e.i.bottom&&(m+=+p-e.i.bottom+k-f.y-x.y);n+f.x+x.x+l>e.i.right&&(h+=-n+e.i.right-l-f.x-x.x);.001>Math.abs(d)&&(d=0);.001>Math.abs(h)&&(h=0);.001>Math.abs(m)&&(m=0);.001>Math.abs(g)&&(g=0);if(0!==d||0!==g||0!==h||0!==m)c=!0,k=g+m,l=d+h,0!==g&&0!==m&&(k/=2,x.za(0)),0!==d&&0!==h&&(l/=2,x.ya(0)),x.set(l+x.x,k+x.y,0)}c&&(this.target.add(x),f.a(this.target).add(r),x.set(0,0,0),C=1);if(1E-6<M.sa(this.object.position)||
1E-6<8*(1-N.N(this.object.ha)))this.dispatchEvent(O),M.a(this.object.position),N.a(this.object.ha)};this.reset=function(){z=y.NONE;this.target.a(this.fb);this.object.position.a(this.Va);this.update()};this.ba=function(a){var b=this.b;a=!1!==a;var b={mousedown:{element:b,s:c},mousewheel:{element:b,s:g},DOMMouseScroll:{element:b,s:g},touchstart:{element:b,s:n},touchend:{element:b,s:q},touchmove:{element:b,s:p},keydown:{element:window,s:h}},d=!1!==a?"addEventListener":"removeEventListener";if(this.Y!==
a||!0!==this.Fa){this.Fa=!0;this.Y=a;for(var e in b)b.hasOwnProperty(e)&&b[e].element[d].apply(b[e].element,[e,b[e].s,!1])}}.bind(this);this.ba(this.Y);this.update()}ja.prototype=Object.create(J.prototype);function Z(a){var b=a||{};a={};a.Ka=b.containerId||"makeItZoom";a.R=b.maxZoomScale||1;a.S=b.minZoomScale||.1;a.J=b.zoomSpeed||2;a.X=!1!==b.zoomTowardMouse;a.G="undefined"!=typeof b.panButton?b.G:2;a.ra="boolean"===typeof b.disableNativeContextMenu?b.ra:!0;a.Pa=!1!==b.hardwareAccelerated;a.fullScreen=!0===b.fullScreen;a.i=b.bounds||null;a.ib=!0!==b.zeroAtCenter;a.La=!1!==b.enableUserInteractions;this.options=a;this.l=document.getElementById(a.Ka);b=this.Ia.call(this,this.l);this.width=this.l.offsetWidth;
this.height=this.l.offsetHeight;this.L=new R(70,this.width/this.height,1,1E6);this.w=new X;this.Xa.call(this,b);this.u=new ia(this.l);this.u.Ya(this.options.ib?"CENTER":"TOP_LEFT");this.u.xa(this.width,this.height);this.u.bb(a.Pa);this.u.b.style.position="absolute";this.m=this.m.bind(this);ka(this);this.controls.wa(1);la(this,a.fullScreen);this.controls.update()}A=Z.prototype;A.$a=function(a){this.controls.ba(a)};
function la(a,b){function c(){d.l.style.width=window.innerWidth;d.l.style.height=window.innerHeight;d.width=d.l.offsetWidth;d.height=d.l.offsetHeight;d.L.K=window.innerWidth/window.innerHeight;ha(d.L);d.u.xa(window.innerWidth,window.innerHeight);d.m()}var d=a;!0===b?(c(),window.addEventListener("resize",c,!1)):window.removeEventListener("resize",c,!1)}A.Ma=function(){return this.l};
A.Ia=function(a){var b=this,c=[];ma(this,a,function(a){var d=b.ua(a),f=getComputedStyle(a).getPropertyValue("position");if("relative"===f||"static"===f)a.T=d;c.push(a)});for(var d=0;d<c.length;d++){var f=c[d];a.removeChild(f);f.T&&(f.style.position="absolute",f.style.top=f.T.top+"px",f.style.left=f.T.left+"px")}return c};A.Xa=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.pa.call(this,c,c.T)}};
A.pa=function(a,b){var c=new Y(a);b&&(c.element.style.left=b.left+"px",c.element.style.top=b.top+"px");c.position.z=0;this.w.add(c)};function ma(a,b,c){b=b.children;for(var d=0;d<b.length;d++)c.call(a,b[d])}
function ka(a){a.controls=new ja(a.L,a.u.b);a.controls.J=a.options.J;a.controls.va(a.options.S);a.controls.cb(a.options.R);a.controls.Za(a.options.i);a.controls.ba(a.options.La);a.controls.X=a.options.X;a.controls.G=a.options.G;!0===a.options.ra&&a.controls.b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);a.controls.addEventListener("change",a.m);a.m()}
A.m=function(){this.u.m(this.w,this.L);var a={type:"mz_render"};a.mz_scale=this.controls.M;a.mz_center_x=this.controls.object.position.x;a.mz_center_y=this.controls.object.position.y;this.dispatchEvent(a)};A.Ha=function(a,b){this.pa(a,{left:b.left,top:-b.top});this.m()};
A.Wa=function(a){for(var b=null,c=0;c<this.w.children.length;c++)this.w.children[c].element===a&&(b=this.w.children[c]);null!==b?this.w.remove(b):console.warn("The specified element could not be removed from the makeItZoom workspace, because it couldn't be found.");this.m()};A.ua=function(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}};A.Na=function(){return this.controls.M};
A.jb=function(a,b,c){var d=this.controls.object.position.x,f=this.controls.object.position.y,g=this.controls.M;"number"!==typeof a&&(a=d);"number"!==typeof b&&(b=f);"number"!==typeof c&&(c=g);this.controls.U(d-a);this.controls.V(-b-f);this.controls.wa(c);this.controls.update(!0)};J.prototype.apply(Z.prototype);window.makeItZoom=Z;Z.prototype.addZoomable=Z.prototype.Ha;Z.prototype.removeZoomable=Z.prototype.Wa;Z.prototype.zoomTo=Z.prototype.jb;Z.prototype.getCurrentScale=Z.prototype.Na;
Z.prototype.getOffset=Z.prototype.ua;Z.prototype.getContainer=Z.prototype.Ma;Z.prototype.setEnableUserInteractions=Z.prototype.$a;
